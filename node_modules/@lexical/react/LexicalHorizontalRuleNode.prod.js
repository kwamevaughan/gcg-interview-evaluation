/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

"use strict";var e=require("@lexical/react/LexicalComposerContext"),t=require("@lexical/react/useLexicalNodeSelection"),r=require("@lexical/utils"),n=require("lexical"),o=require("react"),s=require("react/jsx-runtime");const a=n.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");function c({nodeKey:s}){const[a]=e.useLexicalComposerContext(),[c,i,l]=t.useLexicalNodeSelection(s),u=o.useCallback((e=>{const t=n.$getSelection();return c&&n.$isNodeSelection(t)&&(e.preventDefault(),t.getNodes().forEach((e=>{m(e)&&e.remove()}))),!1}),[c]);return o.useEffect((()=>r.mergeRegister(a.registerCommand(n.CLICK_COMMAND,(e=>{const t=a.getElementByKey(s);return e.target===t&&(e.shiftKey||l(),i(!c),!0)}),n.COMMAND_PRIORITY_LOW),a.registerCommand(n.KEY_DELETE_COMMAND,u,n.COMMAND_PRIORITY_LOW),a.registerCommand(n.KEY_BACKSPACE_COMMAND,u,n.COMMAND_PRIORITY_LOW))),[l,a,c,s,u,i]),o.useEffect((()=>{const e=a.getElementByKey(s),t="selected";null!==e&&(c?r.addClassNamesToElement(e,t):r.removeClassNamesFromElement(e,t))}),[a,c,s]),null}class i extends n.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new i(e.__key)}static importJSON(e){return u().updateFromJSON(e)}static importDOM(){return{hr:()=>({conversion:l,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(e){const t=document.createElement("hr");return r.addClassNamesToElement(t,e.theme.hr),t}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return s.jsx(c,{nodeKey:this.__key})}}function l(){return{node:u()}}function u(){return n.$applyNodeReplacement(new i)}function m(e){return e instanceof i}exports.$createHorizontalRuleNode=u,exports.$isHorizontalRuleNode=m,exports.HorizontalRuleNode=i,exports.INSERT_HORIZONTAL_RULE_COMMAND=a;
