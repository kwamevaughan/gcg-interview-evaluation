module.exports = {

"[externals]/@editorjs/editorjs [external] (@editorjs/editorjs, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("@editorjs/editorjs", () => require("@editorjs/editorjs"));

module.exports = mod;
}}),
"[externals]/@editorjs/header [external] (@editorjs/header, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@editorjs/header");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/@editorjs/list [external] (@editorjs/list, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@editorjs/list");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[externals]/@editorjs/paragraph [external] (@editorjs/paragraph, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("@editorjs/paragraph");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),
"[project]/src/components/EditorComponent.js [ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
// src/components/EditorComponent.js
__turbopack_esm__({
    "default": (()=>EditorComponent)
});
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__ = __turbopack_import__("[externals]/react/jsx-dev-runtime [external] (react/jsx-dev-runtime, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__ = __turbopack_import__("[externals]/react [external] (react, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$editorjs__$5b$external$5d$__$2840$editorjs$2f$editorjs$2c$__cjs$29$__ = __turbopack_import__("[externals]/@editorjs/editorjs [external] (@editorjs/editorjs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$header__$5b$external$5d$__$2840$editorjs$2f$header$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@editorjs/header [external] (@editorjs/header, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$list__$5b$external$5d$__$2840$editorjs$2f$list$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@editorjs/list [external] (@editorjs/list, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$paragraph__$5b$external$5d$__$2840$editorjs$2f$paragraph$2c$__esm_import$29$__ = __turbopack_import__("[externals]/@editorjs/paragraph [external] (@editorjs/paragraph, esm_import)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$react$2d$hot$2d$toast__$5b$external$5d$__$28$react$2d$hot$2d$toast$2c$__esm_import$29$__ = __turbopack_import__("[externals]/react-hot-toast [external] (react-hot-toast, esm_import)");
var __turbopack_async_dependencies__ = __turbopack_handle_async_dependencies__([
    __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$header__$5b$external$5d$__$2840$editorjs$2f$header$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$list__$5b$external$5d$__$2840$editorjs$2f$list$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$paragraph__$5b$external$5d$__$2840$editorjs$2f$paragraph$2c$__esm_import$29$__,
    __TURBOPACK__imported__module__$5b$externals$5d2f$react$2d$hot$2d$toast__$5b$external$5d$__$28$react$2d$hot$2d$toast$2c$__esm_import$29$__
]);
([__TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$header__$5b$external$5d$__$2840$editorjs$2f$header$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$list__$5b$external$5d$__$2840$editorjs$2f$list$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$paragraph__$5b$external$5d$__$2840$editorjs$2f$paragraph$2c$__esm_import$29$__, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2d$hot$2d$toast__$5b$external$5d$__$28$react$2d$hot$2d$toast$2c$__esm_import$29$__] = __turbopack_async_dependencies__.then ? (await __turbopack_async_dependencies__)() : __turbopack_async_dependencies__);
"use client";
;
;
;
;
;
;
;
function EditorComponent({ emailData, setEmailData, setIsSaving, mode }) {
    const editorRef = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useRef"])(null);
    const isMounted = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useRef"])(false); // Track initial mount
    (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react__$5b$external$5d$__$28$react$2c$__cjs$29$__["useEffect"])(()=>{
        if (!isMounted.current) {
            initializeEditor();
            isMounted.current = true;
        }
        return ()=>{
            cleanupEditor();
        };
    }, []); // Empty dependency array to run only once on mount
    const initializeEditor = ()=>{
        console.log("Initializing EditorJS with body:", emailData.body);
        const holderElement = document.getElementById("editorjs");
        if (!holderElement) {
            console.error("Element with ID 'editorjs' is missing.");
            return;
        }
        cleanupEditor();
        try {
            editorRef.current = new __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$editorjs__$5b$external$5d$__$2840$editorjs$2f$editorjs$2c$__cjs$29$__["default"]({
                holder: "editorjs",
                tools: {
                    header: {
                        class: __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$header__$5b$external$5d$__$2840$editorjs$2f$header$2c$__esm_import$29$__["default"],
                        inlineToolbar: true
                    },
                    list: {
                        class: __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$list__$5b$external$5d$__$2840$editorjs$2f$list$2c$__esm_import$29$__["default"],
                        inlineToolbar: true
                    },
                    paragraph: {
                        class: __TURBOPACK__imported__module__$5b$externals$5d2f40$editorjs$2f$paragraph__$5b$external$5d$__$2840$editorjs$2f$paragraph$2c$__esm_import$29$__["default"],
                        inlineToolbar: true,
                        config: {
                            preserveBlank: true
                        }
                    }
                },
                data: {
                    blocks: emailData.body ? parseHtmlToBlocks(emailData.body) : [
                        {
                            type: "paragraph",
                            data: {
                                text: "Start typing your email here..."
                            }
                        }
                    ]
                },
                onChange: async ()=>{
                    await handleEditorChange();
                }
            });
            console.log("EditorJS initialized successfully.");
        } catch (error) {
            console.error("Error initializing EditorJS:", error);
            __TURBOPACK__imported__module__$5b$externals$5d2f$react$2d$hot$2d$toast__$5b$external$5d$__$28$react$2d$hot$2d$toast$2c$__esm_import$29$__["default"].error("Failed to load email editor. Please try again.");
        }
    };
    const cleanupEditor = ()=>{
        if (editorRef.current && typeof editorRef.current.destroy === "function") {
            try {
                editorRef.current.destroy();
                editorRef.current = null;
                console.log("EditorJS instance destroyed.");
            } catch (error) {
                console.error("Error destroying EditorJS instance:", error);
            }
        }
    };
    const parseHtmlToBlocks = (html)=>{
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        const paragraphs = doc.querySelectorAll("p");
        const blocks = Array.from(paragraphs).map((p)=>({
                type: "paragraph",
                data: {
                    text: p.innerHTML || p.textContent
                }
            }));
        return blocks.length > 0 ? blocks : [
            {
                type: "paragraph",
                data: {
                    text: html || "Start typing your email here..."
                }
            }
        ];
    };
    const handleEditorChange = async ()=>{
        if (!editorRef.current) return;
        try {
            setIsSaving(true);
            const content = await editorRef.current.save();
            console.log("Editor content saved:", content);
            const html = content.blocks.map((block)=>{
                switch(block.type){
                    case "header":
                        return `<h${block.data.level}>${block.data.text}</h${block.data.level}>`;
                    case "list":
                        const items = block.data.items.map((item)=>`<li>${item}</li>`).join("");
                        return block.data.style === "ordered" ? `<ol>${items}</ol>` : `<ul>${items}</ul>`;
                    case "paragraph":
                        return `<p>${block.data.text || ""}</p>`;
                    default:
                        return "";
                }
            }).join("\n");
            setEmailData((prev)=>({
                    ...prev,
                    body: html
                }));
            setIsSaving(false);
        } catch (error) {
            console.error("Error saving content from EditorJS:", error);
            setIsSaving(false);
            __TURBOPACK__imported__module__$5b$externals$5d2f$react$2d$hot$2d$toast__$5b$external$5d$__$28$react$2d$hot$2d$toast$2c$__esm_import$29$__["default"].error("Error saving email content.");
        }
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$externals$5d2f$react$2f$jsx$2d$dev$2d$runtime__$5b$external$5d$__$28$react$2f$jsx$2d$dev$2d$runtime$2c$__cjs$29$__["jsxDEV"])("div", {
        id: "editorjs",
        className: `border rounded-lg p-2 min-h-[200px] ${mode === "dark" ? "border-gray-600 bg-gray-700" : ""}`
    }, void 0, false, {
        fileName: "[project]/src/components/EditorComponent.js",
        lineNumber: 133,
        columnNumber: 9
    }, this);
}
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, false);}),
"[externals]/react-hot-toast [external] (react-hot-toast, esm_import)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, a: __turbopack_async_module__, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
__turbopack_async_module__(async (__turbopack_handle_async_dependencies__, __turbopack_async_result__) => { try {
const mod = await __turbopack_external_import__("react-hot-toast");

__turbopack_export_namespace__(mod);
__turbopack_async_result__();
} catch(e) { __turbopack_async_result__(e); } }, true);}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__bfb174._.js.map