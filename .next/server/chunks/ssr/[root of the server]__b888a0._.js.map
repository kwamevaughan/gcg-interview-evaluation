{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///Users/Apple/Documents/Projects/Clients/GCC%20Internal%20Tools/gcg-interview-evaluation/src/components/JobDescriptionModal.js"],"sourcesContent":["// src/components/JobDescriptionModal.js\nimport { useState, useEffect } from \"react\";\nimport { Icon } from \"@iconify/react\";\nimport { supabase } from \"lib/supabase\";\nimport { Document, Page, pdfjs } from \"react-pdf\";\nimport \"react-pdf/dist/esm/Page/AnnotationLayer.css\";\nimport \"react-pdf/dist/esm/Page/TextLayer.css\";\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\n\nexport default function JobDescriptionModal({ isOpen, onClose, onProceed, selectedOpening }) {\n    const [jobDetails, setJobDetails] = useState(null);\n    const [numPages, setNumPages] = useState(null);\n    const [pageNumber, setPageNumber] = useState(1);\n\n    useEffect(() => {\n        if (selectedOpening) {\n            const fetchJobDetails = async () => {\n                const { data, error } = await supabase\n                    .from(\"job_openings\")\n                    .select(\"title, description, file_url, expires_on\")\n                    .eq(\"title\", selectedOpening)\n                    .single();\n                if (error) console.error(\"Error fetching job details:\", error);\n                else setJobDetails(data);\n            };\n            fetchJobDetails();\n        }\n    }, [selectedOpening]);\n\n    const onDocumentLoadSuccess = ({ numPages }) => {\n        setNumPages(numPages);\n    };\n\n    if (!isOpen || !selectedOpening || !jobDetails) return null;\n\n    const { title, description, file_url, expires_on } = jobDetails;\n    const isPdf = file_url && file_url.endsWith(\".pdf\");\n    const isExpired = new Date(expires_on) < new Date();\n\n    // Convert webContentLink to embeddable URL for DOCX\n    const embedUrl = file_url ? file_url.replace(/\\/file\\/d\\/(.+?)\\/.+$/, \"/uc?id=$1&export=download&embedded=true\") : null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\">\n            <div className=\"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 shadow-xl animate-fade-in max-h-[90vh] overflow-y-auto\">\n                <div className=\"flex items-center mb-4\">\n                    <Icon icon=\"mdi:briefcase\" className=\"w-6 h-6 text-[#f05d23] mr-2\" />\n                    <h2 className=\"text-2xl font-bold text-[#231812]\">{title}</h2>\n                </div>\n                <div className=\"mb-4\">\n                    <p className=\"text-[#231812]\">\n                        <strong>Status:</strong> {isExpired ? \"Expired\" : \"Active\"}\n                    </p>\n                    <p className=\"text-[#231812]\">\n                        <strong>Expires On:</strong> {new Date(expires_on).toLocaleDateString()}\n                    </p>\n                </div>\n                {description && (\n                    <div className=\"mb-4\">\n                        <strong className=\"text-[#231812]\">Description:</strong>\n                        <p className=\"text-[#231812]\" dangerouslySetInnerHTML={{ __html: description }} />\n                    </div>\n                )}\n                {file_url && (\n                    <div className=\"mb-4\">\n                        <strong className=\"text-[#231812]\">Job Description:</strong>\n                        {isPdf ? (\n                            <div>\n                                <Document file={file_url} onLoadSuccess={onDocumentLoadSuccess}>\n                                    <Page pageNumber={pageNumber} width={400} />\n                                </Document>\n                                <div className=\"flex justify-between mt-2\">\n                                    <button\n                                        onClick={() => setPageNumber((prev) => Math.max(prev - 1, 1))}\n                                        disabled={pageNumber <= 1}\n                                        className=\"px-2 py-1 bg-gray-300 rounded hover:bg-gray-400\"\n                                    >\n                                        Previous\n                                    </button>\n                                    <p>\n                                        Page {pageNumber} of {numPages}\n                                    </p>\n                                    <button\n                                        onClick={() => setPageNumber((prev) => Math.min(prev + 1, numPages))}\n                                        disabled={pageNumber >= numPages}\n                                        className=\"px-2 py-1 bg-gray-300 rounded hover:bg-gray-400\"\n                                    >\n                                        Next\n                                    </button>\n                                </div>\n                            </div>\n                        ) : (\n                            <div>\n                                <iframe\n                                    src={embedUrl}\n                                    width=\"100%\"\n                                    height=\"400px\"\n                                    className=\"border rounded-lg\"\n                                    title=\"Job Description Document\"\n                                />\n                            </div>\n                        )}\n                    </div>\n                )}\n                <div className=\"flex justify-end gap-4\">\n                    <button\n                        onClick={onClose}\n                        className=\"px-4 py-2 bg-gray-300 text-[#231812] rounded-lg hover:bg-gray-400 transition duration-200\"\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        onClick={onProceed}\n                        className=\"px-4 py-2 bg-[#f05d23] text-white rounded-lg hover:bg-[#d94f1e] transition duration-200 flex items-center\"\n                    >\n                        Proceed\n                        <Icon icon=\"mdi:arrow-right\" width={20} height={20} className=\"ml-2\" />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"AAAA,wCAAwC;;;;;AACxC;AACA;AACA;AACA;;;;;;;;;;;;;AAIA,wHAAA,CAAA,QAAK,CAAC,mBAAmB,CAAC,SAAS,GAAG,CAAC,wCAAwC,EAAE,wHAAA,CAAA,QAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC;AAEnG,SAAS,oBAAoB,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE;IACvF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI,iBAAiB;YACjB,MAAM,kBAAkB;gBACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,wGAAA,CAAA,WAAQ,CACjC,IAAI,CAAC,gBACL,MAAM,CAAC,4CACP,EAAE,CAAC,SAAS,iBACZ,MAAM;gBACX,IAAI,OAAO,QAAQ,KAAK,CAAC,+BAA+B;qBACnD,cAAc;YACvB;YACA;QACJ;IACJ,GAAG;QAAC;KAAgB;IAEpB,MAAM,wBAAwB,CAAC,EAAE,QAAQ,EAAE;QACvC,YAAY;IAChB;IAEA,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,YAAY,OAAO;IAEvD,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG;IACrD,MAAM,QAAQ,YAAY,SAAS,QAAQ,CAAC;IAC5C,MAAM,YAAY,IAAI,KAAK,cAAc,IAAI;IAE7C,oDAAoD;IACpD,MAAM,WAAW,WAAW,SAAS,OAAO,CAAC,yBAAyB,6CAA6C;IAEnH,qBACI,qKAAC;QAAI,WAAU;kBACX,cAAA,qKAAC;YAAI,WAAU;;8BACX,qKAAC;oBAAI,WAAU;;sCACX,qKAAC,oIAAA,CAAA,OAAI;4BAAC,MAAK;4BAAgB,WAAU;;;;;;sCACrC,qKAAC;4BAAG,WAAU;sCAAqC;;;;;;;;;;;;8BAEvD,qKAAC;oBAAI,WAAU;;sCACX,qKAAC;4BAAE,WAAU;;8CACT,qKAAC;8CAAO;;;;;;gCAAgB;gCAAE,YAAY,YAAY;;;;;;;sCAEtD,qKAAC;4BAAE,WAAU;;8CACT,qKAAC;8CAAO;;;;;;gCAAoB;gCAAE,IAAI,KAAK,YAAY,kBAAkB;;;;;;;;;;;;;gBAG5E,6BACG,qKAAC;oBAAI,WAAU;;sCACX,qKAAC;4BAAO,WAAU;sCAAiB;;;;;;sCACnC,qKAAC;4BAAE,WAAU;4BAAiB,yBAAyB;gCAAE,QAAQ;4BAAY;;;;;;;;;;;;gBAGpF,0BACG,qKAAC;oBAAI,WAAU;;sCACX,qKAAC;4BAAO,WAAU;sCAAiB;;;;;;wBAClC,sBACG,qKAAC;;8CACG,qKAAC,wHAAA,CAAA,WAAQ;oCAAC,MAAM;oCAAU,eAAe;8CACrC,cAAA,qKAAC,wHAAA,CAAA,OAAI;wCAAC,YAAY;wCAAY,OAAO;;;;;;;;;;;8CAEzC,qKAAC;oCAAI,WAAU;;sDACX,qKAAC;4CACG,SAAS,IAAM,cAAc,CAAC,OAAS,KAAK,GAAG,CAAC,OAAO,GAAG;4CAC1D,UAAU,cAAc;4CACxB,WAAU;sDACb;;;;;;sDAGD,qKAAC;;gDAAE;gDACO;gDAAW;gDAAK;;;;;;;sDAE1B,qKAAC;4CACG,SAAS,IAAM,cAAc,CAAC,OAAS,KAAK,GAAG,CAAC,OAAO,GAAG;4CAC1D,UAAU,cAAc;4CACxB,WAAU;sDACb;;;;;;;;;;;;;;;;;iDAMT,qKAAC;sCACG,cAAA,qKAAC;gCACG,KAAK;gCACL,OAAM;gCACN,QAAO;gCACP,WAAU;gCACV,OAAM;;;;;;;;;;;;;;;;;8BAM1B,qKAAC;oBAAI,WAAU;;sCACX,qKAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;sCAGD,qKAAC;4BACG,SAAS;4BACT,WAAU;;gCACb;8CAEG,qKAAC,oIAAA,CAAA,OAAI;oCAAC,MAAK;oCAAkB,OAAO;oCAAI,QAAQ;oCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMtF"}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}