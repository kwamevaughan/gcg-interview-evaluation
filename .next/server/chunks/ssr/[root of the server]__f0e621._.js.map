{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/Apple/Documents/Projects/Clients/GCC%20Internal%20Tools/gcg-interview-evaluation/src/components/JobDescriptionModal.js"],"sourcesContent":["// src/components/JobDescriptionModal.js\nimport { useState, useEffect } from \"react\";\nimport { Icon } from \"@iconify/react\";\nimport { supabase } from \"@/lib/supabase\";\n\nexport default function JobDescriptionModal({ isOpen, onClose, onProceed, selectedOpening }) {\n    const [jobDetails, setJobDetails] = useState(null);\n    const [timeLeft, setTimeLeft] = useState(null);\n\n    // Move isExpired above useEffect to avoid reference error\n    const isExpired = (expiresOn) => new Date(expiresOn) < new Date();\n\n    useEffect(() => {\n        if (selectedOpening) {\n            const fetchJobDetails = async () => {\n                const { data, error } = await supabase\n                    .from(\"job_openings\")\n                    .select(\"title, description, file_url, file_id, expires_on\")\n                    .eq(\"title\", selectedOpening)\n                    .single();\n                if (error) console.error(\"Error fetching job details:\", error);\n                else setJobDetails(data);\n            };\n            fetchJobDetails();\n        }\n    }, [selectedOpening]);\n\n    useEffect(() => {\n        if (jobDetails && !isExpired(jobDetails.expires_on)) {\n            const updateTimer = () => {\n                const now = new Date();\n                const expires = new Date(jobDetails.expires_on);\n                const diff = expires - now;\n                if (diff <= 0) {\n                    setTimeLeft(null);\n                } else {\n                    const months = Math.floor(diff / (1000 * 60 * 60 * 24 * 30)); // Approximate month length\n                    const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));\n                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);\n\n                    setTimeLeft({ months, days, hours, minutes, seconds });\n                }\n            };\n            updateTimer();\n            const timer = setInterval(updateTimer, 1000);\n            return () => clearInterval(timer);\n        }\n    }, [jobDetails]);\n\n\n    if (!isOpen || !selectedOpening || !jobDetails) return null;\n\n    const { title, description, file_url, file_id, expires_on } = jobDetails;\n\n    const googleFileId = file_id || (file_url && file_url.match(/file\\/d\\/(.+?)\\//)?.[1]);\n    const previewUrl = googleFileId ? `https://drive.google.com/file/d/${googleFileId}/preview` : null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50\">\n            <div className=\"bg-white rounded-xl max-w-3xl w-full mx-4 shadow-2xl transform transition-all duration-300 animate-fade-in flex flex-col max-h-[90vh]\">\n                {/* Header */}\n                <div className=\"bg-gradient-to-r from-[#f05d23] to-[#d94f1e] rounded-t-xl p-4 flex items-center\">\n                    <Icon icon=\"mdi:briefcase\" className=\"w-8 h-8 text-white mr-3\" />\n                    <h2 className=\"text-2xl font-bold text-white\">{title}</h2>\n                </div>\n\n                {/* Scrollable Content */}\n                <div className=\"flex-1 p-6 overflow-y-auto\">\n                    {/* Status and Expiry */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                        <div className=\"flex items-center bg-gray-100 p-3 rounded-lg shadow-sm\">\n                            <Icon\n                                icon={isExpired(expires_on) ? \"mdi:alert-circle\" : \"mdi:check-circle\"}\n                                className={`w-6 h-6 mr-2 ${isExpired(expires_on) ? \"text-red-500\" : \"text-green-500\"}`}\n                            />\n                            <p className=\"text-[#231812]\">\n                                <strong>Status:</strong> {isExpired(expires_on) ? \"Expired\" : \"Active\"}\n                            </p>\n                        </div>\n                        <div className=\"flex items-center bg-gray-100 p-3 rounded-lg shadow-sm\">\n                            <Icon icon=\"mdi:calendar-clock\" className=\"w-6 h-6 text-[#f05d23] mr-2\" />\n                            <p className=\"text-[#231812]\">\n                                <strong>Expires On:</strong> {new Date(expires_on).toLocaleDateString()}\n                            </p>\n                        </div>\n                    </div>\n\n                    {/* Countdown Timer */}\n                    {!isExpired(expires_on) && timeLeft && (\n                        <div className=\"justify-center mb-6 bg-[#fff8f0] p-4 rounded-lg shadow-sm flex items-center gap-2\">\n                            <Icon icon=\"mdi:timer\" className=\"w-6 h-6 text-[#f05d23]\" />\n                            <div className=\"flex items-center text-[#231812]\">\n                                <strong className=\"mr-2\">Time Left:</strong>\n                                <div className=\"flex gap-2 text-lg\">\n                                    {timeLeft.months > 0 && <span>{timeLeft.months} month{timeLeft.months > 1 ? 's' : ''}</span>}\n                                    {timeLeft.days > 0 && <span>{timeLeft.days} day{timeLeft.days > 1 ? 's' : ''}</span>}\n                                    {timeLeft.hours > 0 && <span>{timeLeft.hours}h</span>}\n                                    {timeLeft.minutes > 0 && <span>{timeLeft.minutes}m</span>}\n                                    {timeLeft.seconds > 0 && <span>{timeLeft.seconds}s</span>}\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n\n                    {/* Description */}\n                    {description && (\n                        <div className=\"mb-6 bg-gray-50 p-4 rounded-lg shadow-sm\">\n                            <div className=\"flex items-center mb-2\">\n                                <Icon icon=\"mdi:text-box\" className=\"w-6 h-6 text-[#f05d23] mr-2\" />\n                                <strong className=\"text-[#231812]\">Description:</strong>\n                            </div>\n                            <p className=\"text-[#231812]\" dangerouslySetInnerHTML={{ __html: description }} />\n                        </div>\n                    )}\n\n                    {/* Job Description Viewer */}\n                    {file_url && previewUrl && (\n                        <div className=\"mb-6\">\n                            <div className=\"flex items-center mb-2\">\n                                <Icon icon=\"mdi:document\" className=\"w-6 h-6 text-[#f05d23] mr-2\" />\n                                <strong className=\"text-[#231812]\">Job Description:</strong>\n                            </div>\n                            <iframe\n                                src={previewUrl}\n                                width=\"100%\"\n                                height=\"600px\"\n                                className=\"border-2 border-gray-200 rounded-lg shadow-inner\"\n                                title=\"Job Description Document\"\n                                allow=\"autoplay\"\n                            />\n                        </div>\n                    )}\n                </div>\n\n                {/* Sticky Footer */}\n                <div className=\"sticky bottom-0 bg-white p-4 border-t border-gray-200 rounded-b-xl shadow-md\">\n                    <div className=\"flex justify-end gap-4\">\n                        <button\n                            onClick={onClose}\n                            className=\"px-6 py-2 bg-gray-200 text-[#231812] rounded-full hover:bg-gray-300 transition duration-200 flex items-center gap-2 shadow-md\"\n                        >\n                            <Icon icon=\"mdi:close\" width={20} height={20} />\n                            Cancel\n                        </button>\n                        <button\n                            onClick={onProceed}\n                            className=\"px-6 py-2 bg-[#f05d23] text-white rounded-full hover:bg-[#d94f1e] transition duration-200 flex items-center gap-2 shadow-md\"\n                        >\n                            Proceed\n                            <Icon icon=\"mdi:arrow-right\" width={20} height={20} />\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}