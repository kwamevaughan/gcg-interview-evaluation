---
deployment:
  tasks:
    # Set the deployment path to the subdomain's folder
    - export DEPLOYPATH=/home/influenc/public_html/new.growthpad.co.ke

    # Navigate to the repository directory
    - cd /home/influenc/repositories/gcg-interview-evaluation

    # Install dependencies
    - npm install

    # Build the Next.js app
    - npm run build

    # Copy necessary files to the subdomain folder
    - cp -r /home/influenc/repositories/gcg-interview-evaluation/.next $DEPLOYPATH
    - cp -r /home/influenc/repositories/gcg-interview-evaluation/public $DEPLOYPATH
    - cp -r /home/influenc/repositories/gcg-interview-evaluation/package.json $DEPLOYPATH
    - cp -r /home/influenc/repositories/gcg-interview-evaluation/package-lock.json $DEPLOYPATH

    # Optionally, if you are using SSR, run the app with PM2 or another process manager:
    # - pm2 start /home/influenc/public_html/new.growthpad.co.ke/server.js --name nextjs
